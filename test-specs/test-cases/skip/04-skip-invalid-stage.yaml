# 测试用例：跳过无效阶段
name: "跳过无效阶段"
description: "测试尝试跳过已确认或不存在的阶段"
category: "skip"
priority: "high"

setup:
  fixtures: "fixtures/confirm/requirements-ready"
  target: "./e2e-test-skip-invalid"

request:
  method: "tools/call"
  params:
    name: "specs-workflow"
    arguments:
      path: "./e2e-test-skip-invalid"
      action:
        type: "skip"

expect:
  operation: "skip"
  # 根据实际行为，MCP 服务器允许跳过任何阶段
  additional_checks:
    - type: "value_equals"
      path: "structuredContent.stage"
      value: "requirements"
      description: "当前阶段应该是需求"
    - type: "value_equals"
      path: "structuredContent.skipped"
      value: true
      description: "应该标记为已跳过"

cleanup: ["./e2e-test-skip-invalid"]