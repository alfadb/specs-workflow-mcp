# 测试用例：完成无效的任务号
name: "完成无效的任务号"
description: "测试尝试完成一个不存在的任务号"
category: "complete-task"
priority: "high"

setup:
  fixtures: "fixtures/complete-task/tasks-stage"
  target: "./e2e-test-complete-invalid"

request:
  method: "tools/call"
  params:
    name: "specs-workflow"
    arguments:
      path: "./e2e-test-complete-invalid"
      action:
        type: "complete_task"
        taskNumber: "99"

expect:
  operation: "complete_task"
  # JSON Schema 验证会自动验证结构是否符合 OpenAPI 规范
  additional_checks:
    - type: "value_equals"
      path: "isError"
      value: true
      description: "应该是错误响应"
    - type: "value_contains"
      path: "content[0].text"
      contains: "not found"
      description: "错误信息应该提到任务未找到"

cleanup: ["./e2e-test-complete-invalid"]