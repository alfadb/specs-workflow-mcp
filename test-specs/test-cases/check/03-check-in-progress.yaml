# 测试用例：检查编辑中的需求文档
name: "检查编辑中的需求文档"
description: "测试检查部分完成的需求文档状态"
category: "check"
priority: "high"

setup:
  fixtures: "fixtures/requirements/in-progress"
  target: "./e2e-test-check-in-progress"

request:
  method: "tools/call"
  params:
    name: "specs-workflow"
    arguments:
      path: "./e2e-test-check-in-progress"
      action:
        type: "check"

expect:
  operation: "check"
  # JSON Schema 验证会自动验证结构是否符合 OpenAPI 规范
  additional_checks:
    - type: "value_equals"
      path: "structuredContent.stage"
      value: "requirements"
      description: "应该处于需求阶段"
    - type: "value_equals"
      path: "structuredContent.progress.overall"
      value: 0
      description: "文档未编辑，进度应该是 0"
    - type: "value_equals"
      path: "structuredContent.status.type"
      value: "not_edited"
      description: "状态应该是未编辑"

cleanup: ["./e2e-test-check-in-progress"]